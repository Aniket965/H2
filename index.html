<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>H2</title>
  </head>
  <body>
    
    <div id="video" style="position: fixed; top:0; bottom:0; left:0; right:0; z-index:1000;"
    onpaste="pasted()">
      <h1>Hello People!</h1>
      <p> Start by pasting any youtube url. For bugs, you can create issues at github.com/poush/h2 </p>

  </div>
    <script>
      // You can also require other files to run in this process
      require('./renderer.js')

      let {clipboard} = require('electron')

      function pasted(){
        let url = clipboard.readText('selection')
        if(web = generateYoutubeUrl(url)){
          document.querySelector("#video").innerHTML = web
          // alert(document.querySelector("#video").innerHTML)
        }
        else
          alert("Invalid Url, we only support youtube for now");
      }


      function generateYoutubeUrl(url) {    
          if (url != undefined || url != '') {        
              var regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=|\?v=)([^#\&\?]*).*/;
              var match = url.match(regExp);
              if (match && match[2].length == 11) {
                  // Do anything for being valid
                  // if need to change the url to embed url then use below line            
                  let web =  'https://www.youtube.com/embed/' + match[2] + '?autoplay=1&enablejsapi=1'
                  return `<iframe style="position:fixed; top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%; border:none; margin:0; padding:0; overflow:hidden; z-index:999999;" src="${web}"></iframe>`
              } else {
                return false;
              }
          }
      }
    </script>
  </body>
</html>
